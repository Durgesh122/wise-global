"use strict";(self.webpackChunkwise_global=self.webpackChunkwise_global||[]).push([[9486],{775:(e,t,a)=>{a.d(t,{A:()=>o});a(5043);var i=a(3546),s=a(7519),l=a(579);const r={hover:{scale:1.05,boxShadow:"0px 4px 15px rgba(0, 0, 0, 0.2)"},tap:{scale:.95}},o=e=>{let{isOpen:t,onClose:a,onConfirm:o,title:n,message:d}=e;return(0,l.jsx)(i.N,{children:t&&(0,l.jsx)(s.P.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,l.jsxs)(s.P.div,{className:"bg-gray-800/50 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/20 max-w-md w-full text-white",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[(0,l.jsx)("h3",{className:"text-lg font-semibold mb-4",children:n}),(0,l.jsx)("p",{className:"text-gray-300 mb-6",children:d}),(0,l.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,l.jsx)(s.P.button,{onClick:a,className:"px-4 py-2 bg-gray-500 rounded-lg hover:bg-gray-600",variants:r,whileHover:"hover",whileTap:"tap",children:"Cancel"}),(0,l.jsx)(s.P.button,{onClick:o,className:"px-4 py-2 bg-red-500 rounded-lg hover:bg-red-600",variants:r,whileHover:"hover",whileTap:"tap",children:"Confirm"})]})]})})})}},928:(e,t,a)=>{a.d(t,{A:()=>l});a(5043);var i=a(7519),s=a(579);const l=()=>(0,s.jsx)(i.P.div,{className:"flex justify-center items-center py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})})},9486:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var i=a(5043),s=a(3611),l=a(7519),r=a(5200),o=a(7488),n=a(791),d=a(928),c=a(775),p=a(579);const u={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},h={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},g={hover:{scale:1.05},tap:{scale:.95}},x=["Monday","Tuesday","Wednesday","Thursday","Friday"],m=["Market","Technical","Financial","Competitor","Other"],f=e=>{var t;let{day:a,reports:s,onUpload:n,onDelete:d,onPreview:c}=e;const[u,x]=(0,i.useState)({title:"",description:"",category:"Market",file:null}),[f,y]=(0,i.useState)(!1);return(0,p.jsxs)(l.P.div,{className:"bg-white/5 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/10",variants:h,children:[(0,p.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:a}),(0,p.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,p.jsx)("input",{type:"text",placeholder:"Report Title",className:"w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",value:u.title,onChange:e=>x({...u,title:e.target.value})}),(0,p.jsx)("textarea",{placeholder:"Report Description",className:"w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",rows:"3",value:u.description,onChange:e=>x({...u,description:e.target.value})}),(0,p.jsx)("select",{className:"w-full p-3 rounded-lg bg-white/10 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400",value:u.category,onChange:e=>x({...u,category:e.target.value}),children:m.map(e=>(0,p.jsx)("option",{value:e,className:"bg-gray-800",children:e},e))}),(0,p.jsx)("input",{id:`file-input-${a}`,type:"file",accept:".pdf",className:"w-full p-3 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:bg-indigo-600 file:text-white file:border-0 file:hover:bg-indigo-700",onChange:e=>x({...u,file:e.target.files[0]})}),(0,p.jsxs)(l.P.button,{onClick:async()=>{if(u.file){y(!0);try{await n(a,u),x({title:"",description:"",category:"Market",file:null});const e=document.getElementById(`file-input-${a}`);e&&(e.value="")}catch(e){o.oR.error(`Failed to upload report: ${e.message}`)}finally{y(!1)}}else o.oR.error("Please select a file.")},disabled:f,className:"w-full px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg flex items-center justify-center gap-2 disabled:opacity-50",variants:g,whileHover:"hover",children:[(0,p.jsx)(r.B88,{})," ",f?"Uploading...":"Upload"]})]}),(0,p.jsxs)("div",{children:[(0,p.jsx)("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Uploaded Reports"}),(null===(t=s[a])||void 0===t?void 0:t.length)>0?(0,p.jsx)("ul",{className:"space-y-2",children:s[a].map(e=>(0,p.jsxs)(l.P.li,{className:"flex justify-between items-center p-3 bg-gray-700/20 rounded-lg",variants:h,children:[(0,p.jsx)("p",{className:"text-sm text-white font-medium truncate",title:e.title,children:e.title}),(0,p.jsxs)("div",{className:"flex gap-2",children:[(0,p.jsx)(l.P.button,{onClick:()=>c(e),className:"text-indigo-400 hover:text-indigo-300",variants:g,whileHover:"hover",children:(0,p.jsx)(r.Vap,{size:16})}),(0,p.jsx)(l.P.button,{onClick:()=>d(e.id),className:"text-red-500 hover:text-red-400",variants:g,whileHover:"hover",children:(0,p.jsx)(r.IXo,{size:16})})]})]},e.id))}):(0,p.jsx)("p",{className:"text-sm text-gray-400",children:"No reports uploaded."})]})]})},y=()=>{const[e,t]=(0,i.useState)({}),[a,r]=(0,i.useState)(!0),[h,g]=(0,i.useState)(!1),[m,y]=(0,i.useState)(null);(0,i.useEffect)(()=>{const e=(0,s.KR)(n.db,"reports"),a=(0,s.Zy)(e,e=>{const a=e.val()||{},i=x.reduce((e,t)=>({...e,[t]:[]}),{});Object.entries(a).forEach(e=>{let[t,a]=e;a.day&&i[a.day]&&i[a.day].push({id:t,...a})}),t(i),r(!1)},e=>{o.oR.error("Failed to load reports: "+e.message),r(!1)});return()=>a()},[]);const b=async(e,t)=>{if(!n.j.currentUser)return void o.oR.error("You must be logged in to upload reports.");const a=t.file,i=await(e=>new Promise((t,a)=>{const i=new FileReader;i.readAsDataURL(e),i.onload=()=>t(i.result),i.onerror=e=>a(e)}))(a),l=Math.floor(1e3+9e3*Math.random()).toString(),r={title:t.title||"Untitled Report",description:t.description||"No description",category:t.category,size:`${(a.size/1048576).toFixed(2)}MB`,fileData:i,filename:a.name,timestamp:Date.now(),day:e,password:l};await(0,s.VC)((0,s.KR)(n.db,"reports"),r),o.oR.success(`Report uploaded for ${e}. Password: ${l}`,{autoClose:5e3})},v=e=>{y(e),g(!0)},w=e=>{window.open(e.fileData,"_blank")};return(0,p.jsxs)(l.P.div,{className:"bg-gray-800/50 p-6 rounded-lg shadow-lg",variants:u,initial:"hidden",animate:"visible",children:[(0,p.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Report Manager"}),a?(0,p.jsx)(d.A,{}):(0,p.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(t=>(0,p.jsx)(f,{day:t,reports:e,onUpload:b,onDelete:v,onPreview:w},t))}),(0,p.jsx)(c.A,{isOpen:h,onClose:()=>g(!1),onConfirm:async()=>{if(m){try{await(0,s.TF)((0,s.KR)(n.db,`reports/${m}`)),o.oR.success("Report deleted successfully.")}catch(e){o.oR.error(`Failed to delete report: ${e.message}`)}g(!1),y(null)}},title:"Confirm Report Deletion",message:"Are you sure you want to delete this report? This action cannot be undone."})]})}}}]);
//# sourceMappingURL=9486.a8563ff6.chunk.js.map