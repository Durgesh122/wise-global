"use strict";(self.webpackChunkwise_global=self.webpackChunkwise_global||[]).push([[9486],{775:(e,t,a)=>{a.d(t,{A:()=>o});a(5043);var i=a(3546),s=a(7519),r=a(579);const l={hover:{scale:1.05,boxShadow:"0px 4px 15px rgba(0, 0, 0, 0.2)"},tap:{scale:.95}},o=e=>{let{isOpen:t,onClose:a,onConfirm:o,title:n,message:d}=e;return(0,r.jsx)(i.N,{children:t&&(0,r.jsx)(s.P.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,r.jsxs)(s.P.div,{className:"bg-gray-800/50 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/20 max-w-md w-full text-white",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:n}),(0,r.jsx)("p",{className:"text-gray-300 mb-6",children:d}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(s.P.button,{onClick:a,className:"px-4 py-2 bg-gray-500 rounded-lg hover:bg-gray-600",variants:l,whileHover:"hover",whileTap:"tap",children:"Cancel"}),(0,r.jsx)(s.P.button,{onClick:o,className:"px-4 py-2 bg-red-500 rounded-lg hover:bg-red-600",variants:l,whileHover:"hover",whileTap:"tap",children:"Confirm"})]})]})})})}},928:(e,t,a)=>{a.d(t,{A:()=>r});a(5043);var i=a(7519),s=a(579);const r=()=>(0,s.jsx)(i.P.div,{className:"flex justify-center items-center py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,s.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})})},9486:(e,t,a)=>{a.r(t),a.d(t,{default:()=>b});var i=a(5043),s=a(3611),r=a(8147),l=a(7519),o=a(5200),n=a(7488),d=a(791),c=a(928),p=a(775),u=a(579);const h={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},g={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},x={hover:{scale:1.05},tap:{scale:.95}},m=["Monday","Tuesday","Wednesday","Thursday","Friday"],f=["Market","Technical","Financial","Competitor","Other"],y=e=>{var t;let{day:a,reports:s,onUpload:r,onDelete:d,onPreview:c}=e;const[p,h]=(0,i.useState)({title:"",description:"",category:"Market",file:null}),[m,y]=(0,i.useState)(!1);return(0,u.jsxs)(l.P.div,{className:"bg-white/5 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/10",variants:g,children:[(0,u.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:a}),(0,u.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,u.jsx)("input",{type:"text",placeholder:"Report Title",className:"w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",value:p.title,onChange:e=>h({...p,title:e.target.value})}),(0,u.jsx)("textarea",{placeholder:"Report Description",className:"w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",rows:"3",value:p.description,onChange:e=>h({...p,description:e.target.value})}),(0,u.jsx)("select",{className:"w-full p-3 rounded-lg bg-white/10 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400",value:p.category,onChange:e=>h({...p,category:e.target.value}),children:f.map(e=>(0,u.jsx)("option",{value:e,className:"bg-gray-800",children:e},e))}),(0,u.jsx)("input",{id:`file-input-${a}`,type:"file",accept:".pdf",className:"w-full p-3 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:bg-indigo-600 file:text-white file:border-0 file:hover:bg-indigo-700",onChange:e=>h({...p,file:e.target.files[0]})}),(0,u.jsxs)(l.P.button,{onClick:async()=>{if(p.file){y(!0);try{await r(a,p),h({title:"",description:"",category:"Market",file:null});const e=document.getElementById(`file-input-${a}`);e&&(e.value="")}catch(e){n.oR.error(`Failed to upload report: ${e.message}`)}finally{y(!1)}}else n.oR.error("Please select a file.")},disabled:m,className:"w-full px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg flex items-center justify-center gap-2 disabled:opacity-50",variants:x,whileHover:"hover",children:[(0,u.jsx)(o.B88,{})," ",m?"Uploading...":"Upload"]})]}),(0,u.jsxs)("div",{children:[(0,u.jsx)("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Uploaded Reports"}),(null===(t=s[a])||void 0===t?void 0:t.length)>0?(0,u.jsx)("ul",{className:"space-y-2",children:s[a].map(e=>(0,u.jsxs)(l.P.li,{className:"flex justify-between items-center p-3 bg-gray-700/20 rounded-lg",variants:g,children:[(0,u.jsx)("p",{className:"text-sm text-white font-medium truncate",title:e.title,children:e.title}),(0,u.jsxs)("div",{className:"flex gap-2",children:[(0,u.jsx)(l.P.button,{onClick:()=>c(e),className:"text-indigo-500 hover:text-indigo-700",variants:x,whileHover:"hover",children:(0,u.jsx)(o.Vap,{size:16})}),(0,u.jsx)(l.P.button,{onClick:()=>d(e.id,e.storagePath),className:"text-red-500 hover:text-red-700",variants:x,whileHover:"hover",children:(0,u.jsx)(o.IXo,{size:16})})]})]},e.id))}):(0,u.jsx)("p",{className:"text-sm text-gray-400",children:"No reports uploaded."})]})]})},b=()=>{const[e,t]=(0,i.useState)({}),[a,o]=(0,i.useState)(!0),[g,x]=(0,i.useState)(!1),[f,b]=(0,i.useState)({id:null,storagePath:null}),v=(0,r.c7)();(0,i.useEffect)(()=>{const e=(0,s.KR)(d.db,"reports"),a=(0,s.Zy)(e,e=>{const a=e.val()||{},i=m.reduce((e,t)=>({...e,[t]:[]}),{});Object.entries(a).forEach(e=>{let[t,a]=e;a.day&&i[a.day]&&i[a.day].push({id:t,...a})}),t(i),o(!1)},e=>{n.oR.error("Failed to load reports: "+e.message),o(!1)});return()=>a()},[]);const w=async(e,t)=>{if(!d.j.currentUser)return void n.oR.error("You must be logged in to upload reports.");const a=t.file,i=`reports/${e}/${Date.now()}_${a.name}`,l=(0,r.KR)(v,i);await(0,r.D)(l,a);const o=await(0,r.qk)(l),c=Math.floor(1e3+9e3*Math.random()).toString(),p={title:t.title||"Untitled Report",description:t.description||"No description",category:t.category,size:`${(a.size/1048576).toFixed(2)}MB`,fileUrl:o,storagePath:i,filename:a.name,timestamp:Date.now(),day:e,password:c};await(0,s.VC)((0,s.KR)(d.db,"reports"),p),n.oR.success(`Report uploaded for ${e}. Password: ${c}`,{autoClose:5e3})},j=(e,t)=>{b({id:e,storagePath:t}),x(!0)},N=e=>{window.open(e.fileUrl,"_blank")};return(0,u.jsxs)(l.P.div,{variants:h,initial:"hidden",animate:"visible",children:[(0,u.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Report Manager"}),a?(0,u.jsx)(c.A,{}):(0,u.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(t=>(0,u.jsx)(y,{day:t,reports:e,onUpload:w,onDelete:j,onPreview:N},t))}),(0,u.jsx)(p.A,{isOpen:g,onClose:()=>x(!1),onConfirm:async()=>{const{id:e,storagePath:t}=f;if(e&&t){try{await(0,s.TF)((0,s.KR)(d.db,`reports/${e}`));const a=(0,r.KR)(v,t);await(0,r.XR)(a),n.oR.success("Report deleted successfully.")}catch(a){n.oR.error(`Failed to delete report: ${a.message}`)}x(!1),b({id:null,storagePath:null})}},title:"Confirm Report Deletion",message:"Are you sure you want to delete this report? This action cannot be undone."})]})}}}]);
//# sourceMappingURL=9486.d82de9af.chunk.js.map