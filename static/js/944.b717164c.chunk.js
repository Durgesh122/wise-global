"use strict";(self.webpackChunkwise_global=self.webpackChunkwise_global||[]).push([[944],{761:(e,a,t)=>{t.d(a,{A:()=>n});t(5043);var s=t(7519),l=t(579);const r={hover:{scale:1.05,boxShadow:"0px 4px 15px rgba(0, 0, 0, 0.2)"},tap:{scale:.95}},n=e=>{let{totalPages:a,currentPage:t,paginate:n}=e;return(0,l.jsx)("div",{className:"mt-6 flex justify-center gap-2",children:Array.from({length:a},(e,a)=>(0,l.jsx)(s.P.button,{onClick:()=>n(a+1),className:"px-4 py-2 rounded-lg shadow-md transition-all duration-300 "+(t===a+1?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-gray-700/50 text-white hover:bg-indigo-600/30"),variants:r,whileHover:"hover",whileTap:"tap","aria-label":`Go to page ${a+1}`,children:a+1},a+1))})}},775:(e,a,t)=>{t.d(a,{A:()=>i});t(5043);var s=t(3546),l=t(7519),r=t(579);const n={hover:{scale:1.05,boxShadow:"0px 4px 15px rgba(0, 0, 0, 0.2)"},tap:{scale:.95}},i=e=>{let{isOpen:a,onClose:t,onConfirm:i,title:o,message:d}=e;return(0,r.jsx)(s.N,{children:a&&(0,r.jsx)(l.P.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,r.jsxs)(l.P.div,{className:"bg-gray-800/50 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/20 max-w-md w-full text-white",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[(0,r.jsx)("h3",{className:"text-lg font-semibold mb-4",children:o}),(0,r.jsx)("p",{className:"text-gray-300 mb-6",children:d}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(l.P.button,{onClick:t,className:"px-4 py-2 bg-gray-500 rounded-lg hover:bg-gray-600",variants:n,whileHover:"hover",whileTap:"tap",children:"Cancel"}),(0,r.jsx)(l.P.button,{onClick:i,className:"px-4 py-2 bg-red-500 rounded-lg hover:bg-red-600",variants:n,whileHover:"hover",whileTap:"tap",children:"Confirm"})]})]})})})}},928:(e,a,t)=>{t.d(a,{A:()=>r});t(5043);var s=t(7519),l=t(579);const r=()=>(0,l.jsx)(s.P.div,{className:"flex justify-center items-center py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,l.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})})},944:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var s=t(5043),l=t(3611),r=t(8147),n=t(791),i=t(7488),o=t(7519),d=t(5200),c=t(928),h=t(7684),m=t(761),x=t(775),u=t(579);const p={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},b={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}},g={hover:{scale:1.05},tap:{scale:.95}},f=e=>{let{submissions:a,handleDelete:t}=e;return(0,u.jsx)(o.P.div,{className:"bg-gray-800/30 rounded-xl shadow-lg border border-gray-200/20 overflow-x-auto",variants:b,children:(0,u.jsxs)("table",{className:"w-full text-white responsive-table",children:[(0,u.jsx)("thead",{className:"bg-gray-700/50",children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Client Name"}),(0,u.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Client ID"}),(0,u.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Email"}),(0,u.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"PAN Card"}),(0,u.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Aadhaar Card"}),(0,u.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Signature"}),(0,u.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Timestamp"}),(0,u.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Actions"})]})}),(0,u.jsx)("tbody",{children:a.map(e=>{var a,s,l;return(0,u.jsxs)(o.P.tr,{className:"border-b border-gray-200/20 hover:bg-gray-700/20",variants:b,children:[(0,u.jsx)("td",{"data-label":"Client Name",className:"p-4",children:e.clientName||"N/A"}),(0,u.jsx)("td",{"data-label":"Client ID",className:"p-4",children:e.clientId||"N/A"}),(0,u.jsx)("td",{"data-label":"Email",className:"p-4",children:e.email||"N/A"}),(0,u.jsx)("td",{"data-label":"PAN Card",className:"p-4",children:null!==(a=e.panCard)&&void 0!==a&&a.downloadURL?(0,u.jsxs)("a",{href:e.panCard.downloadURL,target:"_blank",rel:"noopener noreferrer",download:!0,className:"text-blue-400 hover:underline flex items-center gap-1",children:[(0,u.jsx)(d.a4x,{size:14})," Download"]}):"N/A"}),(0,u.jsx)("td",{"data-label":"Aadhaar Card",className:"p-4",children:null!==(s=e.aadhaarCard)&&void 0!==s&&s.downloadURL?(0,u.jsxs)("a",{href:e.aadhaarCard.downloadURL,target:"_blank",rel:"noopener noreferrer",download:!0,className:"text-blue-400 hover:underline flex items-center gap-1",children:[(0,u.jsx)(d.a4x,{size:14})," Download"]}):"N/A"}),(0,u.jsx)("td",{"data-label":"Signature",className:"p-4",children:null!==(l=e.signature)&&void 0!==l&&l.downloadURL?(0,u.jsxs)("a",{href:e.signature.downloadURL,target:"_blank",rel:"noopener noreferrer",download:!0,className:"text-blue-400 hover:underline flex items-center gap-1",children:[(0,u.jsx)(d.a4x,{size:14})," Download"]}):"N/A"}),(0,u.jsx)("td",{"data-label":"Timestamp",className:"p-4",children:e.timestamp?new Date(e.timestamp).toLocaleString("en-IN"):"N/A"}),(0,u.jsx)("td",{"data-label":"Actions",className:"p-4",children:(0,u.jsx)(o.P.button,{onClick:()=>t(e),className:"text-red-500 hover:text-red-700",variants:g,whileHover:"hover",children:(0,u.jsx)(d.IXo,{size:16})})})]},e.id)})})]})})},j=()=>{const[e,a]=(0,s.useState)([]),[t,d]=(0,s.useState)([]),[b,g]=(0,s.useState)(!0),[j,v]=(0,s.useState)(""),[y,w]=(0,s.useState)(1),[N]=(0,s.useState)(10),[C,A]=(0,s.useState)(!1),[P,S]=(0,s.useState)(null),R=(0,r.c7)();(0,s.useEffect)(()=>{const e=(0,l.KR)(n.db,"clientServiceConsentForms"),t=(0,l.Zy)(e,e=>{const t=e.val(),s=t?Object.entries(t).map(e=>{let[a,t]=e;return{id:a,...t}}).sort((e,a)=>new Date(a.timestamp)-new Date(e.timestamp)):[];a(s),g(!1)},e=>{i.oR.error("Failed to load consent submissions: "+e.message),g(!1)});return()=>t()},[]);const k=(0,s.useCallback)(()=>{let a=[...e];j&&(a=a.filter(e=>Object.values(e).some(e=>String(e).toLowerCase().includes(j.toLowerCase())))),d(a),w(1)},[j,e]);(0,s.useEffect)(()=>{k()},[k]);const D=y*N,L=D-N,F=t.slice(L,D),K=Math.ceil(t.length/N);return(0,u.jsxs)(o.P.div,{variants:p,initial:"hidden",animate:"visible",children:[(0,u.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Consent Submissions"}),(0,u.jsx)(h.A,{searchQuery:j,setSearchQuery:v,placeholder:"Search consents..."}),b?(0,u.jsx)(c.A,{}):(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(f,{submissions:F,handleDelete:e=>{S(e),A(!0)}}),K>1&&(0,u.jsx)(m.A,{totalPages:K,currentPage:y,paginate:w})]}),(0,u.jsx)(x.A,{isOpen:C,onClose:()=>A(!1),onConfirm:async()=>{if(!P||!P.id)return;const{id:e,panCard:a,aadhaarCard:t,signature:s}=P;try{const o=[];null!==a&&void 0!==a&&a.storagePath&&o.push((0,r.XR)((0,r.KR)(R,a.storagePath))),null!==t&&void 0!==t&&t.storagePath&&o.push((0,r.XR)((0,r.KR)(R,t.storagePath))),null!==s&&void 0!==s&&s.storagePath&&o.push((0,r.XR)((0,r.KR)(R,s.storagePath)));(await Promise.allSettled(o)).forEach(e=>{"rejected"===e.status&&"storage/object-not-found"!==e.reason.code&&i.oR.warn(`A file could not be deleted from storage: ${e.reason.code}`)}),await(0,l.TF)((0,l.KR)(n.db,`clientServiceConsentForms/${e}`)),i.oR.success("Consent submission and associated files deleted successfully.")}catch(o){i.oR.error("Failed to delete consent submission: "+o.message)}A(!1),S(null)},title:"Confirm Deletion",message:"Are you sure you want to delete this consent submission?"})]})}},7684:(e,a,t)=>{t.d(a,{A:()=>i});t(5043);var s=t(7519),l=t(5200),r=t(579);const n={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},i=e=>{let{searchQuery:a,setSearchQuery:t,placeholder:i="Search..."}=e;return(0,r.jsxs)(s.P.div,{className:"relative w-full max-w-md mb-6",variants:n,children:[(0,r.jsx)(l.CKj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,r.jsx)("input",{type:"text",placeholder:i,className:"w-full pl-10 pr-4 py-3 rounded-xl bg-gray-800/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400 shadow-md transition-all duration-300",value:a,onChange:e=>t(e.target.value),"aria-label":"Search"})]})}}}]);
//# sourceMappingURL=944.b717164c.chunk.js.map