{"version":3,"file":"static/js/944.0252f00f.chunk.js","mappings":"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","sources":["components/admin/Pagination.js","components/admin/ConfirmationModal.js","components/admin/LoadingSpinner.js","pages/admin/ConsentSubmissions.js","components/admin/SearchBar.js"],"sourcesContent":["import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst buttonVariants = {\r\n  hover: { scale: 1.05, boxShadow: '0px 4px 15px rgba(0, 0, 0, 0.2)' },\r\n  tap: { scale: 0.95 },\r\n};\r\n\r\nconst Pagination = ({ totalPages, currentPage, paginate }) => (\r\n  <div className=\"mt-6 flex justify-center gap-2\">\r\n    {Array.from({ length: totalPages }, (_, i) => (\r\n      <motion.button\r\n        key={i + 1}\r\n        onClick={() => paginate(i + 1)}\r\n        className={`px-4 py-2 rounded-lg shadow-md transition-all duration-300 ${\r\n          currentPage === i + 1\r\n            ? 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white'\r\n            : 'bg-gray-700/50 text-white hover:bg-indigo-600/30'\r\n        }`}\r\n        variants={buttonVariants}\r\n        whileHover=\"hover\"\r\n        whileTap=\"tap\"\r\n        aria-label={`Go to page ${i + 1}`}\r\n      >\r\n        {i + 1}\r\n      </motion.button>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nPagination.propTypes = {\r\n  totalPages: PropTypes.number.isRequired,\r\n  currentPage: PropTypes.number.isRequired,\r\n  paginate: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default Pagination;","import React from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst buttonVariants = {\r\n  hover: { scale: 1.05, boxShadow: '0px 4px 15px rgba(0, 0, 0, 0.2)' },\r\n  tap: { scale: 0.95 },\r\n};\r\n\r\nconst ConfirmationModal = ({ isOpen, onClose, onConfirm, title, message }) => (\r\n  <AnimatePresence>\r\n    {isOpen && (\r\n      <motion.div\r\n        className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n      >\r\n        <motion.div\r\n          className=\"bg-gray-800/50 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/20 max-w-md w-full text-white\"\r\n          initial={{ scale: 0.8, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n          exit={{ scale: 0.8, opacity: 0 }}\r\n        >\r\n          <h3 className=\"text-lg font-semibold mb-4\">{title}</h3>\r\n          <p className=\"text-gray-300 mb-6\">{message}</p>\r\n          <div className=\"flex justify-end gap-4\">\r\n            <motion.button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 bg-gray-500 rounded-lg hover:bg-gray-600\"\r\n              variants={buttonVariants}\r\n              whileHover=\"hover\"\r\n              whileTap=\"tap\"\r\n            >\r\n              Cancel\r\n            </motion.button>\r\n            <motion.button\r\n              onClick={onConfirm}\r\n              className=\"px-4 py-2 bg-red-500 rounded-lg hover:bg-red-600\"\r\n              variants={buttonVariants}\r\n              whileHover=\"hover\"\r\n              whileTap=\"tap\"\r\n            >\r\n              Confirm\r\n            </motion.button>\r\n          </div>\r\n        </motion.div>\r\n      </motion.div>\r\n    )}\r\n  </AnimatePresence>\r\n);\r\n\r\nConfirmationModal.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onConfirm: PropTypes.func.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  message: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ConfirmationModal;","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst LoadingSpinner = () => (\r\n  <motion.div\r\n    className=\"flex justify-center items-center py-6\"\r\n    initial={{ opacity: 0 }}\r\n    animate={{ opacity: 1 }}\r\n    transition={{ duration: 0.5 }}\r\n  >\r\n    <div className=\"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin\"></div>\r\n  </motion.div>\r\n);\r\n\r\nexport default LoadingSpinner;","import React, { useState, useEffect, useCallback } from 'react';\r\nimport { ref, onValue, remove } from 'firebase/database';\r\nimport { getStorage, ref as storageRef, deleteObject } from 'firebase/storage';\r\nimport { db } from '../../firebase';\r\nimport { toast } from 'react-toastify';\r\nimport { motion } from 'framer-motion';\r\nimport { FiTrash2, FiDownload, FiEye } from 'react-icons/fi';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport LoadingSpinner from '../../components/admin/LoadingSpinner';\r\nimport SearchBar from '../../components/admin/SearchBar';\r\nimport Pagination from '../../components/admin/Pagination';\r\nimport ConfirmationModal from '../../components/admin/ConfirmationModal';\r\n\r\nconst containerVariants = {\r\n  hidden: { opacity: 0 },\r\n  visible: { opacity: 1, transition: { staggerChildren: 0.1 } },\r\n};\r\n\r\nconst itemVariants = {\r\n  hidden: { opacity: 0, y: 20 },\r\n  visible: { opacity: 1, y: 0 },\r\n};\r\n\r\nconst buttonVariants = {\r\n  hover: { scale: 1.05 },\r\n  tap: { scale: 0.95 },\r\n};\r\n\r\nconst ConsentTable = ({ submissions, handleDelete }) => (\r\n  <motion.div\r\n    className=\"bg-gray-800/30 rounded-xl shadow-lg border border-gray-200/20 overflow-x-auto p-2\"\r\n    variants={itemVariants}\r\n  >\r\n    <table className=\"min-w-full table-auto text-white\">\r\n      <thead className=\"bg-gray-700/50\">\r\n        <tr>\r\n          <th className=\"p-4 text-left text-sm font-semibold\">Client Name</th>\r\n          <th className=\"p-4 text-left text-sm font-semibold\">Client ID</th>\r\n          <th className=\"p-4 text-left text-sm font-semibold\">Email</th>\r\n          <th className=\"hidden md:table-cell p-2 sm:p-4 text-left text-sm sm:text-base font-semibold\">PAN Card</th>\r\n          <th className=\"hidden md:table-cell p-2 sm:p-4 text-left text-sm sm:text-base font-semibold\">Aadhaar Card</th>\r\n          <th className=\"hidden lg:table-cell p-2 sm:p-4 text-left text-sm sm:text-base font-semibold\">Signature</th>\r\n          <th className=\"p-4 text-left text-sm font-semibold\">Timestamp</th>\r\n          <th className=\"p-4 text-left text-sm font-semibold\">Actions</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {submissions.map((submission) => (\r\n          <motion.tr\r\n            key={submission.id}\r\n            className=\"border-b border-gray-200/20 hover:bg-gray-700/20\"\r\n            variants={itemVariants}\r\n          >\r\n            <td data-label=\"Client Name\" className=\"p-4\">{submission.clientName || 'N/A'}</td>\r\n            <td data-label=\"Client ID\" className=\"p-4\">{submission.clientId || 'N/A'}</td>\r\n            <td data-label=\"Email\" className=\"p-4\">{submission.email || 'N/A'}</td>\r\n            <td data-label=\"PAN Card\" className=\"hidden md:table-cell p-2 sm:p-4\">\r\n              {submission.panCard ? (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <a href={submission.panCard} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 hover:underline\">\r\n                    <FiEye size={14} />\r\n                  </a>\r\n                  <a href={submission.panCard} download className=\"text-green-400 hover:underline\">\r\n                    <FiDownload size={14} />\r\n                  </a>\r\n                </div>\r\n              ) : 'N/A'}\r\n            </td>\r\n            <td data-label=\"Aadhaar Card\" className=\"hidden md:table-cell p-2 sm:p-4\">\r\n              {submission.aadhaarCard ? (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <a href={submission.aadhaarCard} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 hover:underline\">\r\n                    <FiEye size={14} />\r\n                  </a>\r\n                  <a href={submission.aadhaarCard} download className=\"text-green-400 hover:underline\">\r\n                    <FiDownload size={14} />\r\n                  </a>\r\n                </div>\r\n              ) : 'N/A'}\r\n            </td>\r\n            <td data-label=\"Signature\" className=\"hidden lg:table-cell p-2 sm:p-4\">\r\n              {submission.signature ? (\r\n                <div className=\"flex items-center gap-2\">\r\n                  <a href={submission.signature} target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-blue-400 hover:underline\">\r\n                    <FiEye size={14} />\r\n                  </a>\r\n                  <a href={submission.signature} download className=\"text-green-400 hover:underline\">\r\n                    <FiDownload size={14} />\r\n                  </a>\r\n                </div>\r\n              ) : 'N/A'}\r\n            </td>\r\n            <td data-label=\"Timestamp\" className=\"p-2 sm:p-4\">{submission.timestamp ? new Date(submission.timestamp).toLocaleString('en-IN') : 'N/A'}</td>\r\n            <td data-label=\"Actions\" className=\"p-2 sm:p-4\">\r\n              <motion.button onClick={() => handleDelete(submission)} className=\"text-red-500 hover:text-red-700\" variants={buttonVariants} whileHover=\"hover\"><FiTrash2 size={16} /></motion.button>\r\n            </td>\r\n          </motion.tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  </motion.div>\r\n);\r\n\r\nConsentTable.propTypes = {\r\n  submissions: PropTypes.array.isRequired,\r\n  handleDelete: PropTypes.func.isRequired,\r\n};\r\n\r\nconst ConsentSubmissions = () => {\r\n  const [submissions, setSubmissions] = useState([]);\r\n  const [filteredSubmissions, setFilteredSubmissions] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [itemsPerPage] = useState(10);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState(null);\r\n\r\n  const storage = getStorage();\r\n\r\n  useEffect(() => {\r\n    const consentRef = ref(db, 'clientServiceConsentForms');\r\n    const unsubscribe = onValue(consentRef, (snapshot) => {\r\n      const data = snapshot.val();\r\n      const consentList = data ? Object.entries(data).map(([key, value]) => ({ id: key, ...value })).sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp)) : [];\r\n      setSubmissions(consentList);\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      toast.error('Failed to load consent submissions: ' + error.message);\r\n      setIsLoading(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleSearch = useCallback(() => {\r\n    let processedData = [...submissions];\r\n    if (searchQuery) {\r\n      processedData = processedData.filter(s =>\r\n        Object.values(s).some(val =>\r\n          String(val).toLowerCase().includes(searchQuery.toLowerCase())\r\n        )\r\n      );\r\n    }\r\n    setFilteredSubmissions(processedData);\r\n    setCurrentPage(1);\r\n  }, [searchQuery, submissions]);\r\n\r\n  useEffect(() => {\r\n    handleSearch();\r\n  }, [handleSearch]);\r\n\r\n  const handleDeleteClick = (submission) => {\r\n    setItemToDelete(submission);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    if (!itemToDelete || !itemToDelete.id) return;\r\n\r\n    const { id, panCard, aadhaarCard, signature } = itemToDelete;\r\n\r\n    try {\r\n      // 1. Delete associated files from Storage\r\n      const fileDeletionPromises = [];\r\n      if (panCard?.storagePath) {\r\n        fileDeletionPromises.push(deleteObject(storageRef(storage, panCard.storagePath)));\r\n      }\r\n      if (aadhaarCard?.storagePath) {\r\n        fileDeletionPromises.push(deleteObject(storageRef(storage, aadhaarCard.storagePath)));\r\n      }\r\n      if (signature?.storagePath) {\r\n        fileDeletionPromises.push(deleteObject(storageRef(storage, signature.storagePath)));\r\n      }\r\n\r\n      const results = await Promise.allSettled(fileDeletionPromises);\r\n      results.forEach(result => {\r\n        if (result.status === 'rejected' && result.reason.code !== 'storage/object-not-found') {\r\n          toast.warn(`A file could not be deleted from storage: ${result.reason.code}`);\r\n        }\r\n      });\r\n\r\n      // 2. Delete the record from Realtime Database\r\n      await remove(ref(db, `clientServiceConsentForms/${id}`));\r\n      toast.success('Consent submission and associated files deleted successfully.');\r\n    } catch (error) {\r\n      toast.error('Failed to delete consent submission: ' + error.message);\r\n    }\r\n    setIsModalOpen(false);\r\n    setItemToDelete(null);\r\n  };\r\n\r\n  const indexOfLastItem = currentPage * itemsPerPage;\r\n  const indexOfFirstItem = indexOfLastItem - itemsPerPage;\r\n  const currentSubmissions = filteredSubmissions.slice(indexOfFirstItem, indexOfLastItem);\r\n  const totalPages = Math.ceil(filteredSubmissions.length / itemsPerPage);\r\n\r\n  return (\r\n    <motion.div variants={containerVariants} initial=\"hidden\" animate=\"visible\">\r\n      <h2 className=\"text-3xl font-bold text-white mb-6\">Consent Submissions</h2>\r\n      <SearchBar searchQuery={searchQuery} setSearchQuery={setSearchQuery} placeholder=\"Search consents...\" />\r\n      {isLoading ? <LoadingSpinner /> : (\r\n        <>\r\n          <ConsentTable submissions={currentSubmissions} handleDelete={handleDeleteClick} />\r\n          {totalPages > 1 && <Pagination totalPages={totalPages} currentPage={currentPage} paginate={setCurrentPage} />}\r\n        </>\r\n      )}\r\n      <ConfirmationModal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} onConfirm={confirmDelete} title=\"Confirm Deletion\" message=\"Are you sure you want to delete this consent submission?\" />\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default ConsentSubmissions;","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { FiSearch } from 'react-icons/fi';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst itemVariants = {\r\n  hidden: { opacity: 0, y: 20 },\r\n  visible: { opacity: 1, y: 0, transition: { duration: 0.5 } },\r\n};\r\n\r\nconst SearchBar = ({ searchQuery, setSearchQuery, placeholder = \"Search...\" }) => (\r\n  <motion.div\r\n    className=\"relative w-full max-w-md mb-6\"\r\n    variants={itemVariants}\r\n  >\r\n    <FiSearch className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400\" />\r\n    <input\r\n      type=\"text\"\r\n      placeholder={placeholder}\r\n      className=\"w-full pl-10 pr-4 py-3 rounded-xl bg-gray-800/30 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400 shadow-md transition-all duration-300\"\r\n      value={searchQuery}\r\n      onChange={(e) => setSearchQuery(e.target.value)}\r\n      aria-label=\"Search\"\r\n    />\r\n  </motion.div>\r\n);\r\n\r\nSearchBar.propTypes = {\r\n  searchQuery: PropTypes.string.isRequired,\r\n  setSearchQuery: PropTypes.func.isRequired,\r\n  placeholder: PropTypes.string,\r\n};\r\n\r\nexport default SearchBar;"],"names":["buttonVariants","hover","scale","boxShadow","tap","_ref","totalPages","currentPage","paginate","_jsx","className","children","Array","from","length","_","i","motion","button","onClick","variants","whileHover","whileTap","isOpen","onClose","onConfirm","title","message","AnimatePresence","div","initial","opacity","animate","exit","_jsxs","LoadingSpinner","transition","duration","containerVariants","hidden","visible","staggerChildren","itemVariants","y","ConsentTable","submissions","handleDelete","map","submission","tr","clientName","clientId","email","panCard","href","target","rel","FiEye","size","download","FiDownload","aadhaarCard","signature","timestamp","Date","toLocaleString","FiTrash2","id","ConsentSubmissions","setSubmissions","useState","filteredSubmissions","setFilteredSubmissions","isLoading","setIsLoading","searchQuery","setSearchQuery","setCurrentPage","itemsPerPage","isModalOpen","setIsModalOpen","itemToDelete","setItemToDelete","storage","getStorage","useEffect","consentRef","ref","db","unsubscribe","onValue","snapshot","data","val","consentList","Object","entries","_ref2","key","value","sort","a","b","error","toast","handleSearch","useCallback","processedData","filter","s","values","some","String","toLowerCase","includes","indexOfLastItem","indexOfFirstItem","currentSubmissions","slice","Math","ceil","SearchBar","placeholder","_Fragment","Pagination","ConfirmationModal","async","fileDeletionPromises","storagePath","push","deleteObject","storageRef","Promise","allSettled","forEach","result","status","reason","code","warn","remove","success","FiSearch","type","onChange","e"],"sourceRoot":""}