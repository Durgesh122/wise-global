{"version":3,"file":"static/js/9486.d82de9af.chunk.js","mappings":"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","sources":["components/admin/ConfirmationModal.js","components/admin/LoadingSpinner.js","pages/admin/ReportManager.js"],"sourcesContent":["import React from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport PropTypes from 'prop-types';\r\n\r\nconst buttonVariants = {\r\n  hover: { scale: 1.05, boxShadow: '0px 4px 15px rgba(0, 0, 0, 0.2)' },\r\n  tap: { scale: 0.95 },\r\n};\r\n\r\nconst ConfirmationModal = ({ isOpen, onClose, onConfirm, title, message }) => (\r\n  <AnimatePresence>\r\n    {isOpen && (\r\n      <motion.div\r\n        className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\"\r\n        initial={{ opacity: 0 }}\r\n        animate={{ opacity: 1 }}\r\n        exit={{ opacity: 0 }}\r\n      >\r\n        <motion.div\r\n          className=\"bg-gray-800/50 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/20 max-w-md w-full text-white\"\r\n          initial={{ scale: 0.8, opacity: 0 }}\r\n          animate={{ scale: 1, opacity: 1 }}\r\n          exit={{ scale: 0.8, opacity: 0 }}\r\n        >\r\n          <h3 className=\"text-lg font-semibold mb-4\">{title}</h3>\r\n          <p className=\"text-gray-300 mb-6\">{message}</p>\r\n          <div className=\"flex justify-end gap-4\">\r\n            <motion.button\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 bg-gray-500 rounded-lg hover:bg-gray-600\"\r\n              variants={buttonVariants}\r\n              whileHover=\"hover\"\r\n              whileTap=\"tap\"\r\n            >\r\n              Cancel\r\n            </motion.button>\r\n            <motion.button\r\n              onClick={onConfirm}\r\n              className=\"px-4 py-2 bg-red-500 rounded-lg hover:bg-red-600\"\r\n              variants={buttonVariants}\r\n              whileHover=\"hover\"\r\n              whileTap=\"tap\"\r\n            >\r\n              Confirm\r\n            </motion.button>\r\n          </div>\r\n        </motion.div>\r\n      </motion.div>\r\n    )}\r\n  </AnimatePresence>\r\n);\r\n\r\nConfirmationModal.propTypes = {\r\n  isOpen: PropTypes.bool.isRequired,\r\n  onClose: PropTypes.func.isRequired,\r\n  onConfirm: PropTypes.func.isRequired,\r\n  title: PropTypes.string.isRequired,\r\n  message: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default ConfirmationModal;","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\n\r\nconst LoadingSpinner = () => (\r\n  <motion.div\r\n    className=\"flex justify-center items-center py-6\"\r\n    initial={{ opacity: 0 }}\r\n    animate={{ opacity: 1 }}\r\n    transition={{ duration: 0.5 }}\r\n  >\r\n    <div className=\"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin\"></div>\r\n  </motion.div>\r\n);\r\n\r\nexport default LoadingSpinner;","import React, { useState, useEffect } from 'react';\r\nimport { ref, onValue, push, remove } from 'firebase/database';\r\nimport { getStorage, ref as storageRef, uploadBytes, getDownloadURL, deleteObject as deleteFile } from 'firebase/storage';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { FiUpload, FiEye, FiTrash2 } from 'react-icons/fi';\r\nimport { toast } from 'react-toastify';\r\nimport { db, auth } from '../../firebase';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport LoadingSpinner from '../../components/admin/LoadingSpinner';\r\nimport ConfirmationModal from '../../components/admin/ConfirmationModal';\r\n\r\nconst containerVariants = {\r\n  hidden: { opacity: 0 },\r\n  visible: { opacity: 1, transition: { staggerChildren: 0.1 } },\r\n};\r\n\r\nconst itemVariants = {\r\n  hidden: { opacity: 0, y: 20 },\r\n  visible: { opacity: 1, y: 0 },\r\n};\r\n\r\nconst buttonVariants = {\r\n  hover: { scale: 1.05 },\r\n  tap: { scale: 0.95 },\r\n};\r\n\r\nconst WEEK_DAYS = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday'];\r\nconst REPORT_CATEGORIES = ['Market', 'Technical', 'Financial', 'Competitor', 'Other'];\r\n\r\nconst ReportUploadCard = ({ day, reports, onUpload, onDelete, onPreview }) => {\r\n  const [newReport, setNewReport] = useState({ title: '', description: '', category: 'Market', file: null });\r\n  const [uploading, setUploading] = useState(false);\r\n\r\n  const handleUpload = async () => {\r\n    if (!newReport.file) {\r\n      toast.error('Please select a file.');\r\n      return;\r\n    }\r\n    setUploading(true);\r\n    try {\r\n      await onUpload(day, newReport);\r\n      setNewReport({ title: '', description: '', category: 'Market', file: null });\r\n      const fileInput = document.getElementById(`file-input-${day}`);\r\n      if (fileInput) fileInput.value = '';\r\n    } catch (error) {\r\n      toast.error(`Failed to upload report: ${error.message}`);\r\n    } finally {\r\n      setUploading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <motion.div className=\"bg-white/5 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/10\" variants={itemVariants}>\r\n      <h4 className=\"text-lg font-medium text-white mb-3\">{day}</h4>\r\n      <div className=\"mb-4 space-y-3\">\r\n        <input type=\"text\" placeholder=\"Report Title\" className=\"w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400\" value={newReport.title} onChange={(e) => setNewReport({ ...newReport, title: e.target.value })} />\r\n        <textarea placeholder=\"Report Description\" className=\"w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400\" rows=\"3\" value={newReport.description} onChange={(e) => setNewReport({ ...newReport, description: e.target.value })} />\r\n        <select className=\"w-full p-3 rounded-lg bg-white/10 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400\" value={newReport.category} onChange={(e) => setNewReport({ ...newReport, category: e.target.value })}>\r\n          {REPORT_CATEGORIES.map((cat) => <option key={cat} value={cat} className=\"bg-gray-800\">{cat}</option>)}\r\n        </select>\r\n        <input id={`file-input-${day}`} type=\"file\" accept=\".pdf\" className=\"w-full p-3 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:bg-indigo-600 file:text-white file:border-0 file:hover:bg-indigo-700\" onChange={(e) => setNewReport({ ...newReport, file: e.target.files[0] })} />\r\n        <motion.button onClick={handleUpload} disabled={uploading} className=\"w-full px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg flex items-center justify-center gap-2 disabled:opacity-50\" variants={buttonVariants} whileHover=\"hover\">\r\n          <FiUpload /> {uploading ? 'Uploading...' : 'Upload'}\r\n        </motion.button>\r\n      </div>\r\n      <div>\r\n        <h5 className=\"text-sm font-medium text-gray-300 mb-2\">Uploaded Reports</h5>\r\n        {reports[day]?.length > 0 ? (\r\n          <ul className=\"space-y-2\">\r\n            {reports[day].map((report) => (\r\n              <motion.li key={report.id} className=\"flex justify-between items-center p-3 bg-gray-700/20 rounded-lg\" variants={itemVariants}>\r\n                <p className=\"text-sm text-white font-medium truncate\" title={report.title}>{report.title}</p>\r\n                <div className=\"flex gap-2\">\r\n                  <motion.button onClick={() => onPreview(report)} className=\"text-indigo-500 hover:text-indigo-700\" variants={buttonVariants} whileHover=\"hover\"><FiEye size={16} /></motion.button>\r\n                  <motion.button onClick={() => onDelete(report.id, report.storagePath)} className=\"text-red-500 hover:text-red-700\" variants={buttonVariants} whileHover=\"hover\"><FiTrash2 size={16} /></motion.button>\r\n                </div>\r\n              </motion.li>\r\n            ))}\r\n          </ul>\r\n        ) : <p className=\"text-sm text-gray-400\">No reports uploaded.</p>}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nReportUploadCard.propTypes = {\r\n  day: PropTypes.string.isRequired,\r\n  reports: PropTypes.object.isRequired,\r\n  onUpload: PropTypes.func.isRequired,\r\n  onDelete: PropTypes.func.isRequired,\r\n  onPreview: PropTypes.func.isRequired,\r\n};\r\n\r\nconst ReportManager = () => {\r\n  const [reports, setReports] = useState({});\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [itemToDelete, setItemToDelete] = useState({ id: null, storagePath: null });\r\n\r\n  const storage = getStorage();\r\n\r\n  useEffect(() => {\r\n    const reportsRef = ref(db, 'reports');\r\n    const unsubscribe = onValue(reportsRef, (snapshot) => {\r\n      const data = snapshot.val() || {};\r\n      const groupedReports = WEEK_DAYS.reduce((acc, day) => ({ ...acc, [day]: [] }), {});\r\n      Object.entries(data).forEach(([key, value]) => {\r\n        if (value.day && groupedReports[value.day]) {\r\n          groupedReports[value.day].push({ id: key, ...value });\r\n        }\r\n      });\r\n      setReports(groupedReports);\r\n      setIsLoading(false);\r\n    }, (error) => {\r\n      toast.error('Failed to load reports: ' + error.message);\r\n      setIsLoading(false);\r\n    });\r\n    return () => unsubscribe();\r\n  }, []);\r\n\r\n  const handleUploadReport = async (day, reportData) => {\r\n    if (!auth.currentUser) {\r\n      toast.error('You must be logged in to upload reports.');\r\n      return;\r\n    }\r\n    const file = reportData.file;\r\n    const filePath = `reports/${day}/${Date.now()}_${file.name}`;\r\n    const fileRef = storageRef(storage, filePath);\r\n\r\n    await uploadBytes(fileRef, file);\r\n    const fileUrl = await getDownloadURL(fileRef);\r\n    const password = Math.floor(1000 + Math.random() * 9000).toString();\r\n\r\n    const newReportData = {\r\n      title: reportData.title || 'Untitled Report',\r\n      description: reportData.description || 'No description',\r\n      category: reportData.category,\r\n      size: `${(file.size / (1024 * 1024)).toFixed(2)}MB`,\r\n      fileUrl,\r\n      storagePath: filePath,\r\n      filename: file.name,\r\n      timestamp: Date.now(),\r\n      day,\r\n      password,\r\n    };\r\n\r\n    await push(ref(db, 'reports'), newReportData);\r\n    toast.success(`Report uploaded for ${day}. Password: ${password}`, { autoClose: 5000 });\r\n  };\r\n\r\n  const handleDeleteClick = (id, storagePath) => {\r\n    setItemToDelete({ id, storagePath });\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    const { id, storagePath } = itemToDelete;\r\n    if (id && storagePath) {\r\n      try {\r\n        // Delete from Realtime Database\r\n        await remove(ref(db, `reports/${id}`));\r\n        // Delete from Storage\r\n        const fileRef = storageRef(storage, storagePath);\r\n        await deleteFile(fileRef);\r\n        toast.success('Report deleted successfully.');\r\n      } catch (error) {\r\n        toast.error(`Failed to delete report: ${error.message}`);\r\n      }\r\n      setIsModalOpen(false);\r\n      setItemToDelete({ id: null, storagePath: null });\r\n    }\r\n  };\r\n\r\n  const handlePreview = (report) => {\r\n    window.open(report.fileUrl, '_blank');\r\n  };\r\n\r\n  return (\r\n    <motion.div variants={containerVariants} initial=\"hidden\" animate=\"visible\">\r\n      <h2 className=\"text-3xl font-bold text-white mb-6\">Report Manager</h2>\r\n      {isLoading ? <LoadingSpinner /> : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {WEEK_DAYS.map((day) => (\r\n            <ReportUploadCard\r\n              key={day}\r\n              day={day}\r\n              reports={reports}\r\n              onUpload={handleUploadReport}\r\n              onDelete={handleDeleteClick}\r\n              onPreview={handlePreview}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n      <ConfirmationModal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        onConfirm={confirmDelete}\r\n        title=\"Confirm Report Deletion\"\r\n        message=\"Are you sure you want to delete this report? This action cannot be undone.\"\r\n      />\r\n    </motion.div>\r\n  );\r\n};\r\n\r\nexport default ReportManager;\r\n\r\n"],"names":["buttonVariants","hover","scale","boxShadow","tap","_ref","isOpen","onClose","onConfirm","title","message","_jsx","AnimatePresence","children","motion","div","className","initial","opacity","animate","exit","_jsxs","button","onClick","variants","whileHover","whileTap","LoadingSpinner","transition","duration","containerVariants","hidden","visible","staggerChildren","itemVariants","y","WEEK_DAYS","REPORT_CATEGORIES","ReportUploadCard","_reports$day","day","reports","onUpload","onDelete","onPreview","newReport","setNewReport","useState","description","category","file","uploading","setUploading","type","placeholder","value","onChange","e","target","rows","map","cat","id","accept","files","async","fileInput","document","getElementById","error","toast","disabled","FiUpload","length","report","li","FiEye","size","storagePath","FiTrash2","ReportManager","setReports","isLoading","setIsLoading","isModalOpen","setIsModalOpen","itemToDelete","setItemToDelete","storage","getStorage","useEffect","reportsRef","ref","db","unsubscribe","onValue","snapshot","data","val","groupedReports","reduce","acc","Object","entries","forEach","_ref2","key","push","handleUploadReport","reportData","auth","currentUser","filePath","Date","now","name","fileRef","storageRef","uploadBytes","fileUrl","getDownloadURL","password","Math","floor","random","toString","newReportData","toFixed","filename","timestamp","success","autoClose","handleDeleteClick","handlePreview","window","open","ConfirmationModal","remove","deleteFile"],"sourceRoot":""}