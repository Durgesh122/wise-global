"use strict";(self.webpackChunkwise_global=self.webpackChunkwise_global||[]).push([[471],{471:(e,t,s)=>{s.r(t),s.d(t,{default:()=>D});var o=s(5043),a=s(3216),i=s(3611),r=s(5399),n=s(7488),l=s(7115),d=s.n(l),c=(s(6473),s(7519)),p=s(3546),u=s(5200),h=s(5766),m=s.n(h),g=s(579);const x=["Monday","Tuesday","Wednesday","Thursday","Friday"],b=["Market","Technical","Financial","Competitor","Other"],v={hidden:{opacity:0,y:50},visible:{opacity:1,y:0,transition:{duration:.8,ease:"easeOut",staggerChildren:.2}}},f={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}},w={hover:{scale:1.05,boxShadow:"0px 4px 15px rgba(79, 70, 229, 0.4)"},tap:{scale:.95}},y={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.6,staggerChildren:.1}}},N={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.4}}},j=()=>(0,g.jsx)(c.P.div,{className:"flex justify-center items-center py-6",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:(0,g.jsx)("div",{className:"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"})}),R=e=>{let{isOpen:t,onClose:s,onConfirm:o,title:a,message:i}=e;return(0,g.jsx)(p.N,{children:t&&(0,g.jsx)(c.P.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,g.jsxs)(c.P.div,{className:"bg-white/10 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/20 max-w-md w-full",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:a}),(0,g.jsx)("p",{className:"text-gray-300 mb-6",children:i}),(0,g.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,g.jsx)(c.P.button,{onClick:s,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",variants:w,whileHover:"hover",whileTap:"tap",children:"Cancel"}),(0,g.jsx)(c.P.button,{onClick:o,className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600",variants:w,whileHover:"hover",whileTap:"tap",children:"Confirm"})]})]})})})},C=e=>{let{isOpen:t,onClose:s,report:o}=e;return(0,g.jsx)(p.N,{children:t&&(0,g.jsx)(c.P.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,g.jsxs)(c.P.div,{className:"bg-white/10 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/20 max-w-lg w-full",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[(0,g.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:(null===o||void 0===o?void 0:o.title)||"No Title"}),(0,g.jsx)("p",{className:"text-gray-300 mb-4",children:(null===o||void 0===o?void 0:o.description)||"No Description"}),(0,g.jsxs)("p",{className:"text-sm text-gray-400 mb-2",children:["Category: ",(null===o||void 0===o?void 0:o.category)||"N/A"]}),(0,g.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["Size: ",(null===o||void 0===o?void 0:o.size)||"N/A"]}),(0,g.jsx)("img",{src:"https://cdn-icons-png.flaticon.com/512/337/337946.png",alt:"PDF Thumbnail",className:"w-32 h-32 object-contain mx-auto mb-4"}),(0,g.jsx)("div",{className:"flex justify-end",children:(0,g.jsx)(c.P.button,{onClick:s,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",variants:w,whileHover:"hover",whileTap:"tap",children:"Close"})})]})})})},S=e=>{let{searchQuery:t,setSearchQuery:s}=e;return(0,g.jsxs)(c.P.div,{className:"relative w-full max-w-md",variants:f,"data-aos":"fade-up",children:[(0,g.jsx)(u.CKj,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,g.jsx)("input",{type:"text",placeholder:"Search submissions...",className:"w-full pl-10 pr-4 py-3 rounded-xl bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400 shadow-md transition-all duration-300",value:t,onChange:e=>s(e.target.value),"aria-label":"Search submissions"})]})},T=e=>{let{submissions:t,handleDeleteSubmission:s,handleSortToggle:o,sortOrder:a}=e;return(0,g.jsx)(c.P.div,{className:"bg-gray-800/30 rounded-xl shadow-lg border border-gray-200/20 overflow-x-auto mb-8",variants:y,initial:"hidden",animate:"visible","data-aos":"fade-up",children:(0,g.jsxs)("table",{className:"w-full text-white",children:[(0,g.jsx)("thead",{className:"bg-gray-700/50",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Name"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Email"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Phone"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Interest"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Message"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:(0,g.jsxs)("button",{onClick:o,className:"hover:text-indigo-400 transition-colors","aria-label":"Sort by date "+("desc"===a?"ascending":"descending"),children:["Timestamp ","desc"===a?"\u2193":"\u2191"]})}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Actions"})]})}),(0,g.jsx)("tbody",{children:t.map((e,t)=>(0,g.jsxs)(c.P.tr,{className:"border-b border-gray-200/20 hover:bg-gray-700/20 transition-colors duration-200",variants:N,"data-aos":"fade-up","data-aos-delay":100*t,children:[(0,g.jsx)("td",{className:"p-4",children:e.name||"N/A"}),(0,g.jsx)("td",{className:"p-4",children:e.email||"N/A"}),(0,g.jsx)("td",{className:"p-4",children:e.phone||"N/A"}),(0,g.jsx)("td",{className:"p-4",children:e.interest||"N/A"}),(0,g.jsx)("td",{className:"p-4",children:e.message||"N/A"}),(0,g.jsx)("td",{className:"p-4",children:e.timestamp?new Date(e.timestamp).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"}),(0,g.jsx)("td",{className:"p-4",children:(0,g.jsx)(c.P.button,{onClick:()=>s(e.id),className:"text-red-500 hover:text-red-700",variants:w,whileHover:"hover",whileTap:"tap","aria-label":`Delete submission ${e.name||"N/A"}`,children:(0,g.jsx)(u.IXo,{size:16})})})]},e.id))})]})})},P=e=>{let{tableData:t,setTableData:s,handleEditTableRow:o,handleDeleteTableRow:a}=e;const i=Array.isArray(t)?t:Object.values(t||{});return(0,g.jsx)(c.P.div,{className:"bg-gray-800/30 rounded-xl shadow-lg border border-gray-200/20 overflow-x-auto mb-8",variants:y,initial:"hidden",animate:"visible","data-aos":"fade-up",children:(0,g.jsxs)("table",{className:"w-full text-white",children:[(0,g.jsx)("thead",{className:"bg-gray-700/50",children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Sr. No."}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Received from"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Pending at the end of last month"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Received"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Resolved"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Pending"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Pending Complaints 3 Months"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Average Resolution time (in days)"}),(0,g.jsx)("th",{className:"p-4 text-left text-sm font-semibold",children:"Actions"})]})}),(0,g.jsx)("tbody",{children:i.map(e=>(0,g.jsxs)(c.P.tr,{className:"border-b border-gray-200/20 hover:bg-gray-700/20 transition-colors duration-200",variants:N,"data-aos":"fade-up",children:[(0,g.jsx)("td",{className:"p-4",children:e.srNo}),(0,g.jsx)("td",{className:"p-4",children:e.source||"N/A"}),(0,g.jsx)("td",{className:"p-4",children:e.pendingLastMonth||0}),(0,g.jsx)("td",{className:"p-4",children:e.received||0}),(0,g.jsx)("td",{className:"p-4",children:e.resolved||0}),(0,g.jsx)("td",{className:"p-4",children:e.pending||0}),(0,g.jsx)("td",{className:"p-4",children:e.pending3Months||0}),(0,g.jsx)("td",{className:"p-4",children:e.avgResolutionTime||0}),(0,g.jsxs)("td",{className:"p-4 flex gap-2",children:[(0,g.jsx)(c.P.button,{onClick:()=>o(e),className:"text-blue-500 hover:text-blue-700",variants:w,whileHover:"hover",whileTap:"tap","aria-label":`Edit row ${e.srNo}`,children:(0,g.jsx)(u.SG1,{size:16})}),"Grand Total"!==e.srNo&&(0,g.jsx)(c.P.button,{onClick:()=>a(e.srNo),className:"text-red-500 hover:text-red-700",variants:w,whileHover:"hover",whileTap:"tap","aria-label":`Delete row ${e.srNo}`,children:(0,g.jsx)(u.IXo,{size:16})})]})]},e.srNo))})]})})},M=e=>{let{isOpen:t,onClose:s,rowData:a,onSave:i}=e;const[r,l]=(0,o.useState)(a||{});(0,o.useEffect)(()=>{l(a||{})},[a]);return t?(0,g.jsx)(p.N,{children:t&&(0,g.jsx)(c.P.div,{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,g.jsxs)(c.P.div,{className:"bg-white/10 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/20 max-w-md w-full",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},children:[(0,g.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Edit Row ",(null===a||void 0===a?void 0:a.srNo)||"Unknown"]}),(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsx)("input",{type:"text",value:r.source||"",onChange:e=>l({...r,source:e.target.value}),className:"w-full p-2 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Received from",disabled:"Grand Total"===(null===a||void 0===a?void 0:a.srNo)}),(0,g.jsx)("input",{type:"number",value:r.pendingLastMonth||0,onChange:e=>l({...r,pendingLastMonth:Number(e.target.value)||0}),className:"w-full p-2 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Pending last month"}),(0,g.jsx)("input",{type:"number",value:r.received||0,onChange:e=>l({...r,received:Number(e.target.value)||0}),className:"w-full p-2 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Received"}),(0,g.jsx)("input",{type:"number",value:r.resolved||0,onChange:e=>l({...r,resolved:Number(e.target.value)||0}),className:"w-full p-2 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Resolved"}),(0,g.jsx)("input",{type:"number",value:r.pending||0,onChange:e=>l({...r,pending:Number(e.target.value)||0}),className:"w-full p-2 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Pending"}),(0,g.jsx)("input",{type:"number",value:r.pending3Months||0,onChange:e=>l({...r,pending3Months:Number(e.target.value)||0}),className:"w-full p-2 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Pending > 3 Months"}),(0,g.jsx)("input",{type:"number",value:r.avgResolutionTime||0,onChange:e=>l({...r,avgResolutionTime:Number(e.target.value)||0}),className:"w-full p-2 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400",placeholder:"Avg Resolution Time"})]}),(0,g.jsxs)("div",{className:"flex justify-end gap-4 mt-6",children:[(0,g.jsx)(c.P.button,{onClick:s,className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",variants:w,whileHover:"hover",whileTap:"tap",children:"Cancel"}),(0,g.jsx)(c.P.button,{onClick:()=>{r.srNo?(i(r),s()):n.oR.error("Invalid row data. Please try again.",{position:"top-center"})},className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600",variants:w,whileHover:"hover",whileTap:"tap",children:"Save"})]})]})})}):null},k=e=>{var t;let{day:s,newReport:o,setNewReport:a,handleUploadReport:i,uploading:r,passwords:n,reports:l,handleDeleteReport:d,handlePreviewReport:p}=e;return(0,g.jsxs)(c.P.div,{className:"bg-white/5 backdrop-blur-lg p-6 rounded-xl shadow-xl border border-gray-200/10 hover:shadow-2xl transition-all duration-300",variants:f,whileHover:{scale:1.02},"data-aos":"fade-up",children:[(0,g.jsx)("h4",{className:"text-lg font-medium text-white mb-3",children:s}),(0,g.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,g.jsx)("input",{type:"text",placeholder:"Report Title",className:"w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400 shadow-sm transition-all duration-300",value:o.day===s?o.title:"",onChange:e=>a({...o,title:e.target.value,day:s}),"aria-label":`Report title for ${s}`}),(0,g.jsx)("textarea",{placeholder:"Report Description",className:"w-full p-3 rounded-lg bg-white/10 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-indigo-400 shadow-sm transition-all duration-300",rows:"3",value:o.day===s?o.description:"",onChange:e=>a({...o,description:e.target.value,day:s}),"aria-label":`Report description for ${s}`}),(0,g.jsx)("select",{className:"w-full p-3 rounded-lg bg-white/10 text-white focus:outline-none focus:ring-2 focus:ring-indigo-400 shadow-sm transition-all duration-300",value:o.day===s?o.category:"Market",onChange:e=>a({...o,category:e.target.value,day:s}),"aria-label":`Report category for ${s}`,children:b.map(e=>(0,g.jsx)("option",{value:e,className:"bg-gray-800",children:e},e))}),(0,g.jsx)("input",{type:"file",accept:".pdf",className:"w-full p-3 text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:bg-indigo-600 file:text-white file:border-0 file:hover:bg-indigo-700",onChange:e=>a({...o,file:e.target.files[0],day:s}),"aria-label":`Upload report file for ${s}`}),(0,g.jsxs)(c.P.button,{onClick:()=>i(s),disabled:r[s],className:"w-full px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center gap-2 disabled:opacity-50",variants:w,whileHover:"hover",whileTap:"tap","aria-label":`Upload report for ${s}`,children:[(0,g.jsx)(u.B88,{})," ",r[s]?"Uploading...":"Upload"]}),n[s]&&(0,g.jsxs)("p",{className:"mt-2 text-sm text-gray-300",children:["Password for ",s,"'s report: ",(0,g.jsx)("strong",{children:n[s]})]})]}),(0,g.jsxs)("div",{children:[(0,g.jsx)("h5",{className:"text-sm font-medium text-gray-300 mb-2",children:"Uploaded Reports"}),(null===(t=l[s])||void 0===t?void 0:t.length)>0?(0,g.jsx)("ul",{className:"space-y-2",children:l[s].map(e=>(0,g.jsxs)(c.P.li,{className:"flex justify-between items-center p-3 bg-gray-700/20 rounded-lg hover:bg-gray-600/20 transition-colors duration-200",variants:f,children:[(0,g.jsxs)("div",{children:[(0,g.jsx)("p",{className:"text-sm text-white font-medium",children:e.title}),(0,g.jsx)("p",{className:"text-xs text-gray-400",children:e.category})]}),(0,g.jsxs)("div",{className:"flex gap-2",children:[(0,g.jsx)(c.P.button,{onClick:()=>p(e),className:"text-indigo-500 hover:text-indigo-700",variants:w,whileHover:"hover",whileTap:"tap","aria-label":`Preview report ${e.title}`,children:(0,g.jsx)(u.Vap,{size:16})}),(0,g.jsx)(c.P.button,{onClick:()=>d(e.id),className:"text-red-500 hover:text-red-700",variants:w,whileHover:"hover",whileTap:"tap","aria-label":`Delete report ${e.title}`,children:(0,g.jsx)(u.IXo,{size:16})})]})]},e.id))}):(0,g.jsx)("p",{className:"text-sm text-gray-400",children:"No reports uploaded."})]})]})},A=e=>{let{totalPages:t,currentPage:s,paginate:o}=e;return(0,g.jsx)("div",{className:"mt-6 flex justify-center gap-2",children:Array.from({length:t},(e,t)=>(0,g.jsx)(c.P.button,{onClick:()=>o(t+1),className:"px-4 py-2 rounded-lg shadow-md transition-all duration-300 "+(s===t+1?"bg-gradient-to-r from-indigo-600 to-purple-600 text-white":"bg-gray-200 text-black hover:bg-gray-300"),variants:w,whileHover:"hover",whileTap:"tap","aria-label":`Go to page ${t+1}`,children:t+1},t+1))})};const D=function(){const e=(0,a.Zp)(),[t,s]=(0,o.useState)([]),[l,p]=(0,o.useState)([]),[h,b]=(0,o.useState)({}),[y,N]=(0,o.useState)([{srNo:1,source:"Directly from Investors",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:2,source:"SEBI (SCORES)",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:3,source:"Other Sources (if any)",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:"Grand Total",source:"",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0}]),[D,L]=(0,o.useState)(null),[E,F]=(0,o.useState)(!0),[I,O]=(0,o.useState)("desc"),[$,z]=(0,o.useState)(""),[H,U]=(0,o.useState)(1),[K]=(0,o.useState)(10),[B,G]=(0,o.useState)({title:"",description:"",category:"Market",file:null,day:"Monday"}),[V,Q]=(0,o.useState)({}),[X,Z]=(0,o.useState)({}),[W,_]=(0,o.useState)(!1),[q,Y]=(0,o.useState)(null),[J,ee]=(0,o.useState)(null),[te,se]=(0,o.useState)(!1),[oe,ae]=(0,o.useState)(null),[ie,re]=(0,o.useState)(!1),[ne,le]=(0,o.useState)(null);(0,o.useEffect)(()=>{const t=r.j.onAuthStateChanged(t=>{t?localStorage.setItem("isAuthenticated","true"):(localStorage.removeItem("isAuthenticated"),e("/user-login"),n.oR.error("Please log in to access this page.",{position:"top-center"}))});return()=>t()},[e]),(0,o.useEffect)(()=>{d().init({duration:800,once:!0}),F(!0);const e=(0,i.KR)(r.db,"homeFormSubmissions"),t=(0,i.Zy)(e,e=>{const t=e.val();if(t){const e=Object.entries(t).map(e=>{let[t,s]=e;return{id:t,...s}}).sort((e,t)=>"desc"===I?t.timestamp-e.timestamp:e.timestamp-t.timestamp);s(e),p(e),n.oR.success("Submissions loaded successfully.",{position:"top-center",autoClose:2e3})}else s([]),p([]),n.oR.info("No submissions found.",{position:"top-center",autoClose:2e3})},e=>{console.error("Error fetching submissions:",e),L("Failed to load submissions: "+e.message),n.oR.error("Failed to load submissions: "+e.message,{position:"top-center"})}),o=(0,i.KR)(r.db,"reports"),a=(0,i.Zy)(o,e=>{const t=e.val();if(t){const e=Object.entries(t).map(e=>{let[t,s]=e;return{id:t,...s}}),s=x.reduce((t,s)=>(t[s]=e.filter(e=>e.day===s),t),{});b(s),n.oR.success("Reports loaded successfully.",{position:"top-center",autoClose:2e3})}else b(x.reduce((e,t)=>({...e,[t]:[]}),{})),n.oR.info("No reports found.",{position:"top-center",autoClose:2e3})},e=>{console.error("Error fetching reports:",e),L("Failed to load reports: "+e.message),n.oR.error("Failed to load reports: "+e.message,{position:"top-center"})}),l=(0,i.KR)(r.db,"complaintTableData/data"),c=(0,i.Zy)(l,e=>{const t=e.val();if(t){const e=Array.isArray(t)?t:Object.values(t);N(e),n.oR.success("Complaint table data loaded successfully.",{position:"top-center",autoClose:2e3})}else N([{srNo:1,source:"Directly from Investors",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:2,source:"SEBI (SCORES)",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:3,source:"Other Sources (if any)",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:"Grand Total",source:"",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0}]),n.oR.info("No complaint table data found, using default values.",{position:"top-center",autoClose:2e3});F(!1)},e=>{console.error("Error fetching complaint table data:",e),N([{srNo:1,source:"Directly from Investors",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:2,source:"SEBI (SCORES)",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:3,source:"Other Sources (if any)",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0},{srNo:"Grand Total",source:"",pendingLastMonth:0,received:0,resolved:0,pending:0,pending3Months:0,avgResolutionTime:0}]),L("Failed to load complaint table data: "+e.message+" (Check Firebase rules or authentication)"),n.oR.error("Failed to load complaint table data: "+e.message,{position:"top-center"}),F(!1)});return()=>{t(),a(),c()}},[I]);const de=(0,o.useCallback)(()=>{const e=t.filter(e=>{var t,s,o;return((null===(t=e.name)||void 0===t?void 0:t.toLowerCase())||"").includes($.toLowerCase())||((null===(s=e.email)||void 0===s?void 0:s.toLowerCase())||"").includes($.toLowerCase())||((null===(o=e.interest)||void 0===o?void 0:o.toLowerCase())||"").includes($.toLowerCase())});p(e),U(1)},[$,t]);(0,o.useEffect)(()=>{de()},[de]);const ce=H*K,pe=ce-K,ue=l.slice(pe,ce),he=Math.ceil(l.length/K),me=()=>{O(e=>"desc"===e?"asc":"desc")},ge=e=>{Y(()=>async()=>{try{await(0,i.TF)((0,i.KR)(r.db,`reports/${e}`)),n.oR.success("Report deleted successfully.",{position:"top-center"})}catch(D){console.error("Error deleting report:",D),n.oR.error("Failed to delete report: "+D.message,{position:"top-center"})}_(!1)}),ee({title:"Confirm Report Deletion",message:"Are you sure you want to delete this report? This action cannot be undone."}),_(!0)},xe=e=>{ae(e||{}),se(!0)},be=async t=>{if(B.file){if(!r.j.currentUser)return n.oR.error("You must be logged in to upload reports.",{position:"top-center"}),void e("/user-login");if(B.file.size>15728640)n.oR.error("File size exceeds 15MB limit.",{position:"top-center"});else{Q(e=>({...e,[t]:!0}));try{const e=await(s=B.file,new Promise((e,t)=>{const o=new FileReader;o.readAsDataURL(s),o.onload=()=>e(o.result),o.onerror=e=>t(e)})),o=Math.floor(1e3+9e3*Math.random()).toString(),a={title:B.title||"Untitled Report",description:B.description||"No description",category:B.category,size:`${(B.file.size/1048576).toFixed(2)}MB`,file:e,filename:B.file.name,timestamp:Date.now(),day:t,password:o};await(0,i.VC)((0,i.KR)(r.db,"reports"),a),Z(e=>({...e,[t]:o})),n.oR.success(`Report uploaded for ${t} successfully. Password: ${o}`,{position:"top-center",autoClose:5e3}),G({title:"",description:"",category:"Market",file:null,day:"Monday"})}catch(D){console.error("Error uploading report:",D),n.oR.error(`Failed to upload report: ${D.message}`,{position:"top-center"})}finally{Q(e=>({...e,[t]:!1}))}var s}}else n.oR.error("Please select a file.",{position:"top-center"})};return(0,g.jsxs)(c.P.div,{className:"p-4 max-w-6xl mx-auto min-h-screen bg-transparent pt-20",variants:v,initial:"hidden",animate:"visible",children:[(0,g.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,g.jsx)("h2",{className:"text-4xl font-extrabold text-white tracking-tight",children:"Admin Panel - Contact & Reports"}),(0,g.jsx)(c.P.button,{onClick:()=>{localStorage.removeItem("isAuthenticated"),r.j.signOut(),e("/user-login"),n.oR.success("Logged out successfully.",{position:"top-center"})},className:"bg-gradient-to-r from-red-500 to-red-700 text-white px-6 py-2 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",variants:w,whileHover:"hover",whileTap:"tap","data-aos":"zoom-in","aria-label":"Logout",children:"Logout"})]}),(0,g.jsx)(S,{searchQuery:$,setSearchQuery:z}),(0,g.jsxs)("div",{className:"mb-6 flex justify-end gap-4",children:[(0,g.jsxs)(c.P.button,{onClick:me,className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-2 rounded-full shadow-lg hover:shadow-xl transition-all duration-300",variants:w,whileHover:"hover",whileTap:"tap","data-aos":"zoom-in","aria-label":"Sort by date "+("desc"===I?"ascending":"descending"),children:["Sort by Date (","desc"===I?"Newest First":"Oldest First",")"]}),(0,g.jsxs)(c.P.button,{onClick:()=>{try{const e=l.map(e=>({Name:e.name||"N/A",Email:e.email||"N/A",Phone:e.phone||"N/A",Interest:e.interest||"N/A",Message:e.message||"N/A",Timestamp:e.timestamp?new Date(e.timestamp).toLocaleString("en-IN",{dateStyle:"medium",timeStyle:"short"}):"N/A"})),t=m().unparse(e),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),o=document.createElement("a");o.href=URL.createObjectURL(s),o.setAttribute("download","contact_submissions.csv"),document.body.appendChild(o),o.click(),document.body.removeChild(o),n.oR.success("Submissions exported to CSV.",{position:"top-center"})}catch(D){console.error("Error exporting CSV:",D),n.oR.error("Failed to export CSV: "+D.message,{position:"top-center"})}},className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-2 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center gap-2",variants:w,whileHover:"hover",whileTap:"tap","data-aos":"zoom-in","aria-label":"Export to CSV",children:[(0,g.jsx)(u.a4x,{})," Export to CSV"]})]}),E?(0,g.jsx)(j,{}):D?(0,g.jsx)(c.P.div,{className:"bg-red-500/20 rounded-xl p-6 shadow-lg border border-red-500/30 text-center text-white",variants:f,"data-aos":"fade-up",children:D}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Contact Submissions"}),0===l.length?(0,g.jsx)(c.P.div,{className:"bg-gray-800/30 rounded-xl p-6 shadow-lg border border-gray-200/20 text-center text-white",variants:f,"data-aos":"fade-up",children:"No submissions to display."}):(0,g.jsx)(T,{submissions:ue,handleDeleteSubmission:e=>{Y(()=>async()=>{try{await(0,i.TF)((0,i.KR)(r.db,`homeFormSubmissions/${e}`)),n.oR.success("Submission deleted successfully.",{position:"top-center"})}catch(D){console.error("Error deleting submission:",D),n.oR.error("Failed to delete submission: "+D.message,{position:"top-center"})}_(!1)}),ee({title:"Confirm Deletion",message:"Are you sure you want to delete this submission? This action cannot be undone."}),_(!0)},handleSortToggle:me,sortOrder:I}),(0,g.jsx)("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Complaint Table Data"}),(0,g.jsx)(P,{tableData:y,setTableData:N,handleEditTableRow:e=>{if(!e||"object"!==typeof e||!e.srNo)return console.error("Invalid row data passed to edit modal:",e),void n.oR.error("Invalid row data. Please try again.",{position:"top-center"});le(e),re(!0)},handleDeleteTableRow:e=>{Y(()=>async()=>{try{const t=(0,i.KR)(r.db,"complaintTableData/data"),s=y.filter(t=>t.srNo!==e),o=s.reduce((e,t,s)=>(e[s+1]={...t},e),{});await(0,i.yo)(t,o),N(s),n.oR.success(`Row ${e} deleted successfully.`,{position:"top-center"})}catch(D){console.error("Error deleting table row:",D),n.oR.error(`Failed to delete row: ${D.message}`,{position:"top-center"})}_(!1)}),ee({title:"Confirm Deletion",message:"Are you sure you want to delete this row? This action cannot be undone."}),_(!0)}}),(0,g.jsx)("h3",{className:"text-2xl font-semibold text-white mb-4",children:"Upload Reports"}),(0,g.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>(0,g.jsx)(k,{day:e,newReport:B,setNewReport:G,handleUploadReport:be,uploading:V,passwords:X,reports:h,handleDeleteReport:ge,handlePreviewReport:xe},e))}),he>1&&(0,g.jsx)(A,{totalPages:he,currentPage:H,paginate:e=>U(e)})]}),(0,g.jsx)(R,{isOpen:W,onClose:()=>_(!1),onConfirm:q,title:(null===J||void 0===J?void 0:J.title)||"",message:(null===J||void 0===J?void 0:J.message)||""}),(0,g.jsx)(C,{isOpen:te,onClose:()=>se(!1),report:oe}),(0,g.jsx)(M,{isOpen:ie,onClose:()=>re(!1),rowData:ne,onSave:async e=>{try{const t=(0,i.KR)(r.db,"complaintTableData/data"),s=y.reduce((t,s)=>(t[s.srNo]={...s},s.srNo===e.srNo&&(t[s.srNo]={...e}),t),{});await(0,i.yo)(t,s),N(Object.values(s)),n.oR.success(`Row ${e.srNo} updated successfully.`,{position:"top-center"})}catch(D){console.error("Error updating table row:",D),n.oR.error(`Failed to update row: ${D.message}`,{position:"top-center"})}}})]})}},5399:(e,t,s)=>{s.d(t,{db:()=>d,j:()=>l});var o=s(7064),a=s(3611),i=s(8147),r=s(7898);const n=(0,o.Wp)({apiKey:"AIzaSyBF6R7PHX5jqq6akFvrSv0PTYLQeK5WXEw",authDomain:"wise-global-services.firebaseapp.com",databaseURL:"https://wise-global-services-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"wise-global-services",storageBucket:"wise-global-services.appspot.com",messagingSenderId:"652409987561",appId:"1:652409987561:web:021698456d33c163b6ab78"}),l=(0,r.xI)(n),d=(0,a.C3)(n);(0,i.c7)(n)}}]);
//# sourceMappingURL=471.e7cdf242.chunk.js.map